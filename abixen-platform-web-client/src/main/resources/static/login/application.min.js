var platformLoginApp=angular.module("platformLoginApp",["platformLoginControllers","ngRoute","ui.router","toaster"]);platformLoginApp.config(["$httpProvider","$stateProvider","$urlRouterProvider",function(a,b,c){a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",c.otherwise("/"),b.state("application",{abstract:!0,templateUrl:"/login/html/application.html",url:"/"}).state("application.login",{url:"?activation-key",controller:"PlatformAuthenticateController",templateUrl:"/login/html/login.html"})}]);var platformLoginControllers=angular.module("platformLoginControllers",[]);platformLoginControllers.controller("PlatformAuthenticateController",["$rootScope","$scope","$http","$location","$log","$stateParams","toaster",function(a,b,c,d,e,f,g){e.log("PlatformAuthenticateController"),b.credentials={};var h="http://localhost:8080",i="http://localhost:8080/admin",j=function(d,e){var f={authorization:"Basic "+btoa(b.credentials.username+":"+b.credentials.password)};c.get("/user",{headers:f}).success(function(b){b.username?(a.authenticated=!0,a.admin=b.admin):a.authenticated=!1,e&&e()}).error(function(){a.authenticated=!1,e&&e()})};b.login=function(){j(b.credentials,function(){a.authenticated?a.admin?window.location=i:window.location=h:g.pop("error","Wrong credentials","Wrong username and / or password. Please pass correct credentials and try again.")})},f["activation-key"]&&c.get("/api/user-activation/activate/"+f["activation-key"]+"/",{}).success(function(){g.pop("success","Activated","Your account has been activated successfully.")}).error(function(a){g.pop("error","Not activated",a.message)})}]);