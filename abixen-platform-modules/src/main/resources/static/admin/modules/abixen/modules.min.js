var multiVisualizationControllers=angular.module("multiVisualizationControllers",[]);multiVisualizationControllers.controller("MultiVisualizationController",["$scope","$log","$state",function(a,b,c){b.log("$state.$current.name: "+c.$current.name),"application.multiVisualization.modules.databaseDataSource.list"===c.$current.name||"application.multiVisualization.modules.databaseDataSource.edit"===c.$current.name||"application.multiVisualization.modules.databaseDataSource.add"===c.$current.name?a.selectedModule="databaseDataSource":"application.multiVisualization.modules.databaseConnection.list"===c.$current.name||"application.multiVisualization.modules.databaseConnection.edit"===c.$current.name||"application.multiVisualization.modules.databaseConnection.add"===c.$current.name?a.selectedModule="databaseConnection":"application.multiVisualization.modules.fileConnection.list"!==c.$current.name&&"application.multiVisualization.modules.fileConnection.edit"!==c.$current.name&&"application.multiVisualization.modules.fileConnection.add"!==c.$current.name||(a.selectedModule="fileDataSource"),a.selectDatabaseDataSources=function(){a.selectedModule="databaseDataSource"},a.selectDatabaseConnections=function(){a.selectedModule="databaseConnection"},a.selectFileDataSources=function(){a.selectedModule="fileDataSource"}}]);var multiVisualizationDirectives=angular.module("multiVisualizationDirectives",[]);multiVisualizationDirectives.directive("queryBuilder",["$compile",function(a){return{restrict:"E",scope:{group:"=",fields:"="},templateUrl:"/admin/modules/abixen/multi-visualization/html/query-builder.html",compile:function(b,c){var d,e;return d=b.contents().remove(),function(b,c,f){b.operators=[{name:"AND"},{name:"OR"}],b.conditions=[{name:"="},{name:"<>"},{name:"<"},{name:"<="},{name:">"},{name:">="}],b.addCondition=function(){b.group.rules.push({condition:"=",field:"Firstname",data:""})},b.removeCondition=function(a){b.group.rules.splice(a,1)},b.addGroup=function(){b.group.rules.push({group:{operator:"AND",rules:[]}})},b.removeGroup=function(){"group"in b.$parent&&b.$parent.group.rules.splice(b.$parent.$index,1)},e||(e=a(d)),c.append(e(b,function(a){return a}))}}}}]);var multiVisualizationModule=angular.module("multiVisualizationModule",["multiVisualizationControllers","multiVisualizationDirectives","databaseDataSourceModule","databaseConnectionModule","fileDataSourceModule"]);multiVisualizationModule.config(["$stateProvider",function(a){a.state("application.multiVisualization",{url:"/multi-visualization",templateUrl:"/admin/modules/abixen/multi-visualization/html/index.html",controller:"MultiVisualizationController"}).state("application.multiVisualization.modules",{url:"/modules",templateUrl:"/admin/modules/abixen/multi-visualization/modules/html/index.html"})}]);var databaseConnectionControllers=angular.module("databaseConnectionControllers",[]);databaseConnectionControllers.controller("DatabaseConnectionListController",["$scope","$http","$log","uiGridConstants","DatabaseConnection","gridFilter","applicationNavigationItems","$state",function(a,b,c,d,e,f,g,h){c.log("DataSourceListController"),angular.extend(this,new AbstractCrudListController(a,b,c,d,e,f)),a.entityListGrid.columnDefs=[{field:"id",pinnedLeft:!0,enableColumnResizing:!1,enableFiltering:!1,width:50},{field:"name",pinnedLeft:!0,width:200},{field:"databaseType",pinnedLeft:!0,width:200},{field:"databaseHost",width:200},{field:"databasePort",width:200},{field:"databaseName",width:200},{field:"createdBy.username",name:"Created By",width:200},{field:"createdDate",width:200,cellFilter:"date:'"+platformParameters.formats.DATE_TIME_FORMAT+"'"},{field:"lastModifiedBy.username",name:"Last Modified By",width:200},{field:"lastModifiedDate",width:200,cellFilter:"date:'"+platformParameters.formats.DATE_TIME_FORMAT+"'"}],a.query={and:[{name:"title",operation:"=",value:"Page View"}]},a.filterCriteria={page:0,size:20,sort:"id,asc",gridFilterParameters:[]};var i={id:1,styleClass:"btn add-new-button",faIcon:"fa fa-plus",title:"New Database Connection",onClick:function(){h.go("application.multiVisualization.modules.databaseConnection.add")},visible:!0,disabled:!1};g.setTopbarItem(i),a.read()}]),databaseConnectionControllers.controller("DatabaseConnectionDetailController",["$scope","$http","$state","$stateParams","$log","DatabaseConnection","$parse","toaster",function(a,b,c,d,e,f,g,h){e.log("DataSourceDetailController"),angular.extend(this,new AbstractCrudDetailController(a,b,c,d,e,f,g,"application.multiVisualization.modules.databaseConnection")),a.databaseTypes=["POSTGRES","MYSQL","ORACLE"],a.testConnection=function(){return e.log("testConnection()"),a.entityForm.$invalid?(e.log("Form is invalid and could not be saved."),void a.$broadcast("show-errors-check-validity")):void f.test({},a.entity,function(b){if(a.entityForm.$setPristine(),e.log("data.form: ",b),angular.forEach(b.form,function(b,c){e.log("fiel22dName: "+c+", "+b),"id"!==c&&"moduleId"!==c&&a.entityForm[c].$setValidity("serverMessage",!0)}),0==b.formErrors.length)return void h.pop(platformParameters.statusAlertTypes.SUCCESS,"Connected","The application has been connected to the database successfully.");for(var c=0;c<b.formErrors.length;c++){var d=b.formErrors[c].field;e.log("fieldName: "+d);var f=b.formErrors[c].message,i=g("entityForm."+d+".$error.serverMessage");a.entityForm[d].$setValidity("serverMessage",!1),i.assign(a,f)}a.$broadcast("show-errors-check-validity")})},a.get(d.id)}]);var databaseConnectionModule=angular.module("databaseConnectionModule",["databaseConnectionControllers","databaseConnectionServices"]);databaseConnectionModule.config(["$stateProvider",function(a){a.state("application.multiVisualization.modules.databaseConnection",{url:"/database-connection",templateUrl:"/admin/modules/abixen/multi-visualization/modules/database-connection/html/index.html"}).state("application.multiVisualization.modules.databaseConnection.list",{url:"/list",templateUrl:"/admin/modules/abixen/multi-visualization/modules/database-connection/html/list.html",controller:"DatabaseConnectionListController"}).state("application.multiVisualization.modules.databaseConnection.add",{url:"/add",templateUrl:"/admin/modules/abixen/multi-visualization/modules/database-connection/html/edit.html",controller:"DatabaseConnectionDetailController"}).state("application.multiVisualization.modules.databaseConnection.edit",{url:"/edit/:id",templateUrl:"/admin/modules/abixen/multi-visualization/modules/database-connection/html/edit.html",controller:"DatabaseConnectionDetailController"})}]);var databaseConnectionServices=angular.module("databaseConnectionServices",["ngResource"]);databaseConnectionServices.factory("DatabaseConnection",["$resource",function(a){return a("/admin/modules/abixen/multi-visualization/database-connections/:id",{},{query:{method:"GET",isArray:!1},update:{method:"PUT"},test:{method:"POST",url:"/admin/modules/abixen/multi-visualization/database-connections/test",isArray:!1},tables:{method:"GET",url:"/admin/modules/abixen/multi-visualization/database-connections/:id/tables",isArray:!0},tableColumns:{method:"GET",url:"/admin/modules/abixen/multi-visualization/database-connections/:id/tables/:tableName/columns",isArray:!0}})}]);var databaseDataSourceControllers=angular.module("databaseDataSourceControllers",[]);databaseDataSourceControllers.controller("DatabaseDataSourceListController",["$scope","$http","$log","uiGridConstants","DatabaseDataSource","gridFilter","applicationNavigationItems","$state",function(a,b,c,d,e,f,g,h){c.log("DatabaseDataSourceListController"),angular.extend(this,new AbstractCrudListController(a,b,c,d,e,f)),a.entityListGrid.columnDefs=[{field:"id",pinnedLeft:!0,enableColumnResizing:!1,enableFiltering:!1,width:50},{field:"name",pinnedLeft:!0,width:200},{field:"description",width:200},{field:"databaseConnection.name",name:"Connection Name",width:200},{field:"createdBy.username",name:"Created By",width:200},{field:"createdDate",width:200,cellFilter:"date:'"+platformParameters.formats.DATE_TIME_FORMAT+"'"},{field:"lastModifiedBy.username",name:"Last Modified By",width:200},{field:"lastModifiedDate",width:200,cellFilter:"date:'"+platformParameters.formats.DATE_TIME_FORMAT+"'"}],a.query={and:[{name:"title",operation:"=",value:"Page View"}]},a.filterCriteria={page:0,size:20,sort:"id,asc",gridFilterParameters:[]};var i={id:1,styleClass:"btn add-new-button",faIcon:"fa fa-plus",title:"New Database Data Source",onClick:function(){h.go("application.multiVisualization.modules.databaseDataSource.add")},visible:!0,disabled:!1};g.setTopbarItem(i),a.read()}]),databaseDataSourceControllers.controller("DatabaseDataSourceDetailController",["$scope","$http","$state","$stateParams","$log","DatabaseDataSource","$parse","DatabaseConnection",function(a,b,c,d,e,f,g,h){e.log("DatabaseDataSourceDetailController"),angular.extend(this,new AbstractCrudDetailController(a,b,c,d,e,f,g,"application.multiVisualization.modules.databaseDataSource")),a.databaseConnections=[],a.databaseTables=[],a.databaseTableColumns=[],a.fields=[],h.query({},function(b){a.databaseConnections=b.content,e.log("$scope.databaseConnections: ",a.databaseConnections)}),a.getDatabaseTables=function(b){h.tables({id:b.id},function(b){a.databaseTables=b,e.log("$scope.databaseTables: ",a.databaseTables)})},a.getDatabaseTableColumns=function(b,c){h.tableColumns({id:b.id,tableName:c},function(b){e.log("databaseTableColumns data: ",b);for(var c=[],d=0;d<b.length;d++){e.log("iteracja: "+a.entity.columns);var f=!1;if(null!=a.entity.columns)for(var g=0;g<a.entity.columns.length;g++)a.entity.columns[g].name==b[d]&&(f=!0);c.push({name:b[d],selected:f})}a.fields=c,a.databaseTableColumns=c})};var i='{"group": {"operator": "AND","rules": []}}';a.json=null,a.filter=JSON.parse(i),a.$watch("filter",function(b){a.entity&&(a.json=JSON.stringify(b,null,2),a.entity.filter=a.json)},!0);var j=function(){e.log("afterGetDatabaseDataSource",a.entity),a.json=JSON.stringify(a.entity.filter,null,2),a.filter=JSON.parse(a.entity.filter),a.getDatabaseTables(a.entity.databaseConnection),a.getDatabaseTableColumns(a.entity.databaseConnection,a.entity.table)};a.beforeSaveForm=function(){e.log("beforeSaveForm",a.entity),a.entity.columns=[];for(var b=1,c=0;c<a.fields.length;c++)a.fields[c].selected&&a.entity.columns.push({name:a.fields[c].name,position:b++})},a.get(d.id,j)}]);var databaseDataSourceModule=angular.module("databaseDataSourceModule",["databaseDataSourceControllers","databaseDataSourceServices","databaseConnectionModule"]);databaseDataSourceModule.config(["$stateProvider",function(a){a.state("application.multiVisualization.modules.databaseDataSource",{url:"/data-source",templateUrl:"/admin/modules/abixen/multi-visualization/modules/database-data-source/html/index.html"}).state("application.multiVisualization.modules.databaseDataSource.list",{url:"/list",templateUrl:"/admin/modules/abixen/multi-visualization/modules/database-data-source/html/list.html",controller:"DatabaseDataSourceListController"}).state("application.multiVisualization.modules.databaseDataSource.add",{url:"/add",templateUrl:"/admin/modules/abixen/multi-visualization/modules/database-data-source/html/edit.html",controller:"DatabaseDataSourceDetailController"}).state("application.multiVisualization.modules.databaseDataSource.edit",{url:"/edit/:id",templateUrl:"/admin/modules/abixen/multi-visualization/modules/database-data-source/html/edit.html",controller:"DatabaseDataSourceDetailController"})}]);var databaseDataSourceServices=angular.module("databaseDataSourceServices",["ngResource"]);databaseDataSourceServices.factory("DatabaseDataSource",["$resource",function(a){return a("/admin/modules/abixen/multi-visualization/database-data-sources/:id",{},{query:{method:"GET",isArray:!1},update:{method:"PUT"}})}]);var fileDataSourceControllers=angular.module("fileDataSourceControllers",[]);fileDataSourceControllers.controller("FileDataSourceListController",["$scope","$http","$log","uiGridConstants","FileDataSource","gridFilter","applicationNavigationItems","$state",function(a,b,c,d,e,f,g,h){c.log("FileDataSourceListController"),angular.extend(this,new AbstractCrudListController(a,b,c,d,e,f)),a.entityListGrid.columnDefs=[{field:"id",pinnedLeft:!0,enableColumnResizing:!1,enableFiltering:!1,width:50},{field:"name",pinnedLeft:!0,width:200},{field:"createdBy.username",name:"Created By",width:200},{field:"createdDate",width:200,cellFilter:"date:'"+platformParameters.formats.DATE_TIME_FORMAT+"'"},{field:"lastModifiedBy.username",name:"Last Modified By",width:200},{field:"lastModifiedDate",width:200,cellFilter:"date:'"+platformParameters.formats.DATE_TIME_FORMAT+"'"}],a.query={and:[{name:"title",operation:"=",value:"Page View"}]},a.filterCriteria={page:0,size:20,sort:"id,asc",gridFilterParameters:[]};var i={id:1,styleClass:"btn add-new-button",faIcon:"fa fa-plus",title:"New File Data Source",onClick:function(){h.go("application.multiVisualization.modules.fileDataSource.add")},visible:!0,disabled:!1};g.setTopbarItem(i),a.read()}]),fileDataSourceControllers.controller("FileDataSourceDetailController",["$scope","$http","$state","$stateParams","$log","FileDataSource","$parse",function(a,b,c,d,e,f,g){e.log("FileDataSourceDetailController"),angular.extend(this,new AbstractCrudDetailController(a,b,c,d,e,f,g,"application.multiVisualization.modules.fileDataSource")),a.get(d.id)}]);var fileDataSourceModule=angular.module("fileDataSourceModule",["fileDataSourceControllers","fileDataSourceServices"]);fileDataSourceModule.config(["$stateProvider",function(a){a.state("application.multiVisualization.modules.fileDataSource",{url:"/data-source",templateUrl:"/admin/modules/abixen/multi-visualization/modules/file-data-source/html/index.html"}).state("application.multiVisualization.modules.fileDataSource.list",{url:"/list",templateUrl:"/admin/modules/abixen/multi-visualization/modules/file-data-source/html/list.html",controller:"FileDataSourceListController"}).state("application.multiVisualization.modules.fileDataSource.add",{url:"/add",templateUrl:"/admin/modules/abixen/multi-visualization/modules/file-data-source/html/edit.html",controller:"FileDataSourceDetailController"}).state("application.multiVisualization.modules.fileDataSource.edit",{url:"/edit/:id",templateUrl:"/admin/modules/abixen/multi-visualization/modules/file-data-source/html/edit.html",controller:"FileDataSourceDetailController"})}]);var fileDataSourceServices=angular.module("fileDataSourceServices",["ngResource"]);fileDataSourceServices.factory("FileDataSource",["$resource",function(a){return a("/admin/modules/abixen/multi-visualization/file-data-sources/:id",{},{query:{method:"GET",isArray:!1},update:{method:"PUT"}})}]);